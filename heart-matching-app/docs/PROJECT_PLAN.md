# 心不全患者マッチングアプリ プロジェクト計画書

## プロジェクト概要

**プロジェクト名**: 心不全患者マッチングアプリ  
**目的**: 医療・介護施設向けの匿名患者情報登録・検索・マッチング機能を提供するWebプロトタイプの開発  
**技術スタック**: React (Vite) + TailwindCSS + Lucide React  
**対象ユーザー**: 医療・介護施設の職員  

## 完了済み項目 ✅

### 基盤構築
- [x] Vite+Reactプロジェクトの新規作成
- [x] 必要パッケージの導入（lucide-react, tailwindcss等）
- [x] TailwindCSSのビルド設定修正
- [x] TailwindCSS v4→v3.4.0へのダウングレード
- [x] スタイル適用問題の解決

### 基本機能実装
- [x] ログイン画面の実装
- [x] ダッシュボード画面の実装
- [x] 患者一覧表示機能
- [x] 検索フィルター機能
- [x] 患者登録フォームの基本実装

### UI/UX改善
- [x] ログイン画面の入力バグ修正
- [x] 患者登録フォームの大幅改善
  - [x] エリア選択機能
  - [x] チェックボックス・選択項目化
  - [x] 心不全専門項目の追加
  - [x] プライバシー配慮項目の実装

### 詳細機能
- [x] 追加項目の実装
  - [x] 褥瘡、輸血、生活保護対応
  - [x] 看取り希望項目
  - [x] 介入可能日・時間設定
  - [x] 投薬内容管理
- [x] バリデーション処理の強化
- [x] サンプルデータによる動作確認

### 開発環境
- [x] npm run dev での開発サーバー起動・動作確認
- [x] npm run build による本番ビルド実行

## 現在の課題 🔧

### 緊急対応が必要
- [ ] **入力フィールドバグの修正** (最優先)
  - 現象: すべてのテキスト入力で一文字ごとに入力が終了
  - 原因: Reactコンポーネントの再レンダリング問題
  - 対策: フォーム状態管理の最適化

## 今後の開発計画 📋

### Phase 1: バグ修正・安定化 (1-2週間)
- [ ] 入力フィールドバグの根本修正
- [ ] フォーム送信後のリセット機能改善
- [ ] エラーハンドリングの強化
- [ ] レスポンシブデザインの最適化

### Phase 2: 機能拡張 (2-3週間)
- [ ] **施設情報管理**
  - [ ] 施設特性登録機能
  - [ ] 施設情報編集画面
  - [ ] 施設プロフィール表示

- [ ] **マッチング・推薦システム**
  - [ ] 患者ニーズと施設特性のマッチングロジック
  - [ ] 地域性を考慮した優先表示
  - [ ] マッチング精度の向上
  - [ ] **マッチング申請機能**
    - [ ] 施設間でのマッチング申請送信
    - [ ] 申請の承認・拒否機能
    - [ ] 申請ステータス管理

- [ ] **自施設患者管理機能**
  - [ ] 自施設登録患者の一覧表示画面
  - [ ] 患者情報の編集・更新機能
  - [ ] 患者の削除・アーカイブ機能
  - [ ] 患者のマッチング状況表示

- [ ] **通知・アラート機能**
  - [ ] マッチング成立時のリアルタイム通知
  - [ ] 新規マッチング申請受信アラート
  - [ ] 患者状況変更の通知
  - [ ] システム内メッセージ機能

- [ ] **患者詳細画面・コミュニケーション機能** (高優先度アイデア)
  - [ ] 患者詳細画面の実装
    - [ ] フリマアプリ風の詳細情報表示
    - [ ] 患者情報の詳細表示（個人情報は除く）
    - [ ] 医療処置・介護度の詳細情報
    - [ ] 希望サービス・介入可能日時の詳細
  - [ ] 施設間リアルタイムチャット機能
    - [ ] フリマアプリ風のチャット画面UI
    - [ ] マッチング前の事前相談・質疑応答
    - [ ] メッセージの既読・未読管理
    - [ ] ファイル共有機能（検査結果画像、紹介状等）
    - [ ] チャット履歴の保存・検索機能
  - [ ] マッチング進行管理
    - [ ] 照会申請 → 相談中 → マッチング成立のフロー
    - [ ] 各段階でのステータス表示・管理
    - [ ] マッチング後の外部システム連携（MCS等）

- [ ] **検索・表示機能強化**
  - [ ] 高度な検索フィルター
  - [ ] ソート機能（距離、マッチング度など）
  - [ ] マップ表示機能の実装

### Phase 3: データ管理・連携 (3-4週間)
- [ ] **バックエンド設計**
  - [ ] API設計・仕様策定
  - [ ] データベース設計
  - [ ] 認証・認可システム設計

- [ ] **データ連携**
  - [ ] RESTful API実装
  - [ ] データベース連携
  - [ ] リアルタイム更新機能

### Phase 4: セキュリティ・最適化 (2週間)
- [ ] **セキュリティ強化**
  - [ ] 個人情報保護対策の強化
  - [ ] データ暗号化
  - [ ] アクセス制御の実装

- [ ] **パフォーマンス最適化**
  - [ ] ページロード速度改善
  - [ ] メモリ使用量最適化
  - [ ] モバイル対応強化

### Phase 5: 本番環境対応 (1-2週間)
- [ ] **デプロイメント**
  - [ ] 本番環境セットアップ
  - [ ] CI/CD パイプライン構築
  - [ ] モニタリング体制整備

- [ ] **品質保証**
  - [ ] 統合テスト実施
  - [ ] ユーザビリティテスト
  - [ ] セキュリティ監査

## 技術的詳細

### 現在の構成
```
heart-matching-app/
├── src/
│   ├── App.jsx (メインコンポーネント)
│   ├── index.css (Tailwind設定)
│   └── main.jsx
├── public/
├── docs/
│   └── PROJECT_PLAN.md (このファイル)
├── package.json
├── tailwind.config.js (v3設定)
├── postcss.config.js
└── vite.config.js
```

### 主要コンポーネント
- `HeartFailureMatchingApp`: メインアプリケーション
- `LoginView`: ログイン画面
- `Dashboard`: ダッシュボード・患者一覧
- `RegisterView`: 患者登録フォーム
- `ContactModal`: 患者照会モーダル

### 状態管理
- React Hooks (useState, useEffect) を使用
- フォームデータ、患者リスト、フィルター条件を管理

## リスク管理

### 技術的リスク
- **状態管理の複雑化**: 機能拡張に伴うReact状態管理の複雑化
  - 対策: Redux Toolkit 導入検討
- **パフォーマンス問題**: 大量データ処理時のレスポンス低下
  - 対策: 仮想化、ページネーション実装

### 開発リスク
- **要件変更**: 医療現場からの仕様変更要求
  - 対策: アジャイル開発手法、定期的なレビュー
- **リソース不足**: 開発工数の見積もり不足
  - 対策: 機能の優先順位付け、MVP先行

## 成功指標 (KPI)

### 技術指標
- [ ] ページロード時間 < 2秒
- [ ] モバイル対応スコア > 90点
- [ ] アクセシビリティスコア > 95点
- [ ] バグ報告数 < 月5件

### ユーザビリティ指標
- [ ] フォーム入力完了率 > 95%
- [ ] 検索成功率 > 90%
- [ ] ユーザー満足度 > 4.0/5.0

### 新機能関連指標
- [ ] マッチング申請成功率 > 80%
- [ ] 申請承認率 > 70%
- [ ] 通知開封率 > 85%
- [ ] 自施設患者管理画面利用率 > 90%
- [ ] チャット機能利用率 > 75%
- [ ] チャット返信率 > 80%
- [ ] ファイル共有成功率 > 95%

### ビジネス指標
- [ ] 月間アクティブ施設数 > 50施設
- [ ] 患者登録数 > 200件/月
- [ ] マッチング成立数 > 30件/月

## 参考資料

### 開発関連
- [React公式ドキュメント](https://react.dev/)
- [TailwindCSS公式ドキュメント](https://tailwindcss.com/)
- [Vite公式ドキュメント](https://vitejs.dev/)
- [Lucide React Icons](https://lucide.dev/)

### 医療・介護関連
- 心不全治療ガイドライン
- NYHA分類基準
- 介護保険制度概要

### 新機能関連文書
- [新機能仕様書](NEW_FEATURES_SPEC.md)
- [患者詳細画面・チャット機能仕様書](CHAT_FEATURE_SPEC.md) ← 新規追加
- [マッチングシステム設計書](MATCHING_SYSTEM_DESIGN.md) (作成予定)
- [通知システム設計書](NOTIFICATION_SYSTEM_DESIGN.md) (作成予定)

---

**最終更新**: 2025年6月27日  
**次回レビュー予定**: 週次（毎週月曜日）  
**担当者**: 開発チーム  
**承認者**: プロジェクトマネージャー
